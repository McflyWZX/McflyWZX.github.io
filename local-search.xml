<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ååŒè¿‡æ»¤ä¸çŸ©é˜µåˆ†è§£è¿‡æ»¤ç³»ç»Ÿ</title>
    <link href="/2021/10/27/ML/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E4%B8%8E%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3%E8%BF%87%E6%BB%A4%E7%B3%BB%E7%BB%9F/"/>
    <url>/2021/10/27/ML/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E4%B8%8E%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3%E8%BF%87%E6%BB%A4%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="ååŒè¿‡æ»¤ä¸çŸ©é˜µåˆ†è§£"><a href="#ååŒè¿‡æ»¤ä¸çŸ©é˜µåˆ†è§£" class="headerlink" title="ååŒè¿‡æ»¤ä¸çŸ©é˜µåˆ†è§£"></a>ååŒè¿‡æ»¤ä¸çŸ©é˜µåˆ†è§£</h1><h2 id="æ¨èç³»ç»Ÿ"><a href="#æ¨èç³»ç»Ÿ" class="headerlink" title="æ¨èç³»ç»Ÿ"></a>æ¨èç³»ç»Ÿ</h2><p>åœ¨å¦‚ä»Šçš„å¤§æ•°æ®æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸æ–­åœ°åœ¨ä¸æ¨èç³»ç»Ÿæ‰“äº¤é“ã€‚åœ¨éŸ³ä¹æ’­æ”¾å™¨ä¸­å¬å‡ é¦–å–œæ¬¢çš„æ­Œï¼Œä¸ä¸€ä¼šå„¿æ’­æ”¾å™¨å°±å¼€å§‹å‘ä½ æ¨èç±»ä¼¼çš„æ­Œï¼›æ‰“å¼€Bç«™åˆ·å‡ æ¡è§†é¢‘ï¼Œé©¬ä¸Šå°±æœ‰ä¸ä¹‹ç±»ä¼¼çš„è§†é¢‘å‡ºç°åœ¨äº†ä½ çš„é¦–é¡µã€‚æ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œæˆ‘ä»¬å·²ç»å¤„äºä¸€ç§å¹¿å‘Šæ•ˆç‡æœ€å¤§åŒ–çš„ç¯å¢ƒä¹‹ä¸­ï¼Œä¸ä¹‹åŒæ¥çš„æ˜¯ä¸€ä¸ªä¸ªçš„ä¿¡æ¯èŒ§æˆ¿ï¼Œæˆ‘ä»¬ç¡®å®çœ‹åˆ°äº†å½“æ—¶æˆ‘ä»¬å–œæ¬¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¸ä¹…ä¹‹åæˆ‘ä»¬ä¹Ÿä¼šä¸ºä¹‹æ„Ÿåˆ°æ— èŠï¼Œäºæ­¤åŒæ—¶æˆ‘ä»¬å¯¹ä¸€äº›äº‹ç‰©çš„åè§ä¹Ÿä¼šåŠ æ·±ï¼Œäººä¸äººä¹‹é—´çš„éš”é˜‚ä¹Ÿä¼šåŠ å‰§ï¼Œæ¨èç³»ç»Ÿï¼Œæˆ‘çœ‹è¿˜æ˜¯éšæœºç‚¹å¥½ï¼ˆç¬‘ğŸ˜‚ï¼‰ã€‚</p><hr><h2 id="å½±è¯„æ¨è"><a href="#å½±è¯„æ¨è" class="headerlink" title="å½±è¯„æ¨è"></a>å½±è¯„æ¨è</h2><p>ä»Šå¤©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç»å…¸çš„æ¨èç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæ ¹æ®ç›®æ ‡ç”¨æˆ·çš„å½±è¯„ï¼ˆè¯„åˆ†ï¼‰æƒ…å†µæ¥ä¸ºä»–æ¨èä»–å¯èƒ½å–œæ¬¢çš„ç”µå½±ã€‚</p><h3 id="ååŒè¿‡æ»¤"><a href="#ååŒè¿‡æ»¤" class="headerlink" title="ååŒè¿‡æ»¤"></a>ååŒè¿‡æ»¤</h3><p>æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°æ ¹æ®ç”¨æˆ·å·²ç»æœ‰çš„è¯„ä»·æ¥æ‰¾åˆ°ä¸ä¹‹ç›¸ä¼¼çš„ç”¨æˆ·ï¼Œç„¶åæ ¹æ®ç›¸ä¼¼ç”¨æˆ·çš„æ‰“åˆ†æƒ…å†µæ¥æ¨èç»™ç›®æ ‡ç”¨æˆ·ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ˜¯æ€»èƒ½æ‰¾åˆ°è¿™æ ·çš„ç›¸ä¼¼ç”¨æˆ·ï¼Œè€Œä¸”æŒ‰ç…§ååŒæ»¤æ³¢ç†è®ºï¼Œæˆ‘ä»¬éœ€è¦ç»´æŒä¸€ä¸ª $r_{User \times Item}$å¤§å°çš„çŸ©é˜µã€‚æ˜¾ç„¶è¿™é‡Œçš„$Item$å’Œ$User$çš„æ•°ç›®éƒ½æ˜¯éå¸¸å·¨å¤§çš„ï¼Œè€Œä¸”éšç€æ—¶é—´ä¼šä¸æ–­å¢åŠ ã€‚æ›´ä¸ä¼˜é›…çš„æ˜¯è¿™ä¸ªçŸ©é˜µæ˜¾è€Œæ˜“è§æ˜¯ç¨€ç–çš„ï¼Œç»´æŒè¿™æ ·çš„çŸ©é˜µä¼šäº§ç”Ÿéå¸¸ä¸å¿…è¦çš„å¼€é”€ã€‚</p><h3 id="çŸ©é˜µåˆ†è§£"><a href="#çŸ©é˜µåˆ†è§£" class="headerlink" title="çŸ©é˜µåˆ†è§£"></a>çŸ©é˜µåˆ†è§£</h3><p>çŸ©é˜µåˆ†è§£çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†çŸ©é˜µ$r$åˆ†è§£æˆä¸¤ä¸ªçŸ©é˜µçš„ä¹˜ç§¯$p \times q^T$ï¼Œå…¶ä¸­$p$ä¸ºç”¨æˆ·çŸ©é˜µï¼Œå¤§å°ä¸º$User \times k$ï¼›$q$ä¸ºç‰©å“çŸ©é˜µï¼Œå¤§å°ä¸º$Item \times k$ï¼Œå…¶ä¸­ï¼Œ$k$ä¸ºéšå› å­ï¼Œæˆ‘ä¸ªäººçš„ç†è§£å°±æ˜¯ç”¨æˆ·ä¹‹é—´ã€ç‰©å“ä¹‹é—´å·®å¼‚çš„è¡¨ç¤ºã€‚è¿™æ ·ä¸€æ¥æˆ‘ä»¬å°±å°†åŸæ¥çš„å¹³æ–¹ç©ºé—´å¤æ‚åº¦è½¬åŒ–æˆäº†çº¿æ€§ç©ºé—´å¤æ‚åº¦ï¼Œè€Œä¸”æœ€ä¸ºå…³é”®çš„ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†æ¯ä¸ªç”¨æˆ·å¯¹æ‰€æœ‰ç‰©å“è¯„ä»·çš„æ•°æ®çš„è¿‘ä¼¼å€¼ï¼Œæœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ¨èäº†ã€‚</p><p>ä½†æ˜¯ä¸€èˆ¬æ¥è®²æˆ‘ä»¬æ˜¯æ— æ³•ç›´æ¥å¾—åˆ°$p \times q^T = \hat{r} = r$çŸ©é˜µï¼Œæˆ‘ä»¬åªèƒ½å¯¹åŸæ•°æ®è¿›è¡Œæ‹Ÿåˆï¼Œä½¿å¾—$\hat{r}$åœ¨å·²æœ‰çš„æ•°æ®é›†ä¸Šå°½å¯èƒ½åœ°æ¥è¿‘$r$ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>SGD</code>ç®—æ³•è¿›è¡Œæ‹Ÿåˆã€‚</p><p>åŒæ—¶æˆ‘ä»¬æ³¨æ„åˆ°å¯¹ä¸åŒçš„ç”¨æˆ·ï¼Œæœ‰äº›å¯èƒ½ä¼šåå¥½æ‰“ä½åˆ†ï¼Œè€Œæœ‰äº›å–œæ¬¢æ‰“é«˜åˆ†ï¼Œå¯¹ä¸åŒçš„ç‰©å“ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å‡å»è¿™äº›å½±å“æ‰èƒ½å¾—åˆ°ç”¨æˆ·ä¹‹é—´ã€ç‰©å“ä¹‹é—´çš„å·®è·ã€‚</p><blockquote><p>$$<br>\hat{r}<em>{ui} = \mu + b_u + b_i + p_u  q_i^T\<br>err = r</em>{ui} - \hat{r}<em>{ui}\<br>ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆï¼ŒåŠ å…¥æ­£åˆ™é¡¹\<br>MSE = \sum</em>{(u,i) \in K} (r_{ui} - \hat{r}<em>{ui})^2 + \alpha (||b_u||^2 + ||b_i||^2 + ||p_u||^2   + ||q_i||^2)\<br>åº”ç”¨SGDç®—æ³•ï¼Œå¯¹MSEä¸­çš„å„ä¸ªå˜é‡æ±‚åå¯¼\<br>b_uâ€™ += 2<em>err-2\alpha b_u\<br>b_iâ€™ += 2</em>err-2\alpha b_i\<br>p_uâ€™ += 2<em>err</em>q_i-2\alpha p_u\<br>q_iâ€™ += 2<em>err</em>p_u-2\alpha q_i\<br>æ³¨æ„è¿™é‡Œp_uâ€™ã€q_iâ€™çš„æ›´æ–°ä¸å­˜åœ¨ç»´åº¦é—®é¢˜ï¼Œp:n</em>{user}\times kã€q:n_{item}\times k\<br>p_u:1\times kã€q_i:1\times k<br>$$</p></blockquote><hr><h2 id="å®éªŒæ•°æ®"><a href="#å®éªŒæ•°æ®" class="headerlink" title="å®éªŒæ•°æ®"></a>å®éªŒæ•°æ®</h2><p>è¾“å…¥ï¼šå½±è¯„å­—å…¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">critics = &#123;<span class="hljs-string">&#x27;Lisa Rose&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Lady in the Water&#x27;</span>: <span class="hljs-number">2.5</span>, <span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">3.5</span>,<br>            <span class="hljs-string">&#x27;Just My Luck&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">3.5</span>, <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">2.5</span>,<br>            <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">3.0</span>&#125;,<br>           <span class="hljs-string">&#x27;Gene Seymour&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Lady in the Water&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">3.5</span>,<br>            <span class="hljs-string">&#x27;Just My Luck&#x27;</span>: <span class="hljs-number">1.5</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">5.0</span>, <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">3.0</span>,<br>            <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">3.5</span>&#125;,<br>           <span class="hljs-string">&#x27;Michael Phillips&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Lady in the Water&#x27;</span>: <span class="hljs-number">2.5</span>, <span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">3.0</span>,<br>            <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">3.5</span>, <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">4.0</span>&#125;,<br>           <span class="hljs-string">&#x27;Claudia Puig&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">3.5</span>, <span class="hljs-string">&#x27;Just My Luck&#x27;</span>: <span class="hljs-number">3.0</span>,<br>            <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">4.5</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">4.0</span>,<br>            <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">2.5</span>&#125;,<br>           <span class="hljs-string">&#x27;Mick LaSalle&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Lady in the Water&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">4.0</span>,<br>            <span class="hljs-string">&#x27;Just My Luck&#x27;</span>: <span class="hljs-number">2.0</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">3.0</span>,<br>            <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">2.0</span>&#125;,<br>           <span class="hljs-string">&#x27;Jack Matthews&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Lady in the Water&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">4.0</span>,<br>            <span class="hljs-string">&#x27;The Night Listener&#x27;</span>: <span class="hljs-number">3.0</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">5.0</span>, <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">3.5</span>&#125;,<br>           <span class="hljs-string">&#x27;Toby&#x27;</span>: <br>           &#123;<span class="hljs-string">&#x27;Snakes on a Plane&#x27;</span>: <span class="hljs-number">4.5</span>, <span class="hljs-string">&#x27;You, Me and Dupree&#x27;</span>: <span class="hljs-number">1.0</span>, <span class="hljs-string">&#x27;Superman Returns&#x27;</span>: <span class="hljs-number">4.0</span>&#125;&#125;<br></code></pre></td></tr></table></figure><p>ç›®æ ‡ï¼Œä¸ºTobyè¿›è¡Œæ¨èã€‚</p><p>æˆ‘ä»¬è¿›è¡Œæ¨¡å—åŒ–è®¾è®¡ï¼Œä»¥ä¸‹ä¸ºçŸ©é˜µåˆ†è§£æ¨èç³»ç»Ÿçš„ä»£ç ï¼š</p><p>é¦–å…ˆæˆ‘ä»¬å¯¹è¦ç”¨çš„å˜é‡è¿›è¡Œåˆå§‹åŒ–:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, k</span>):</span><br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    :param k: éšå› å­æ•°é‡</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    self.k = k<br>    self.Pu = np.random.random(size=(<span class="hljs-number">1</span>, k))<br>    self.Qi = np.random.random(size=(<span class="hljs-number">1</span>, k))<br>    self.Bu = np.random.random(<span class="hljs-number">1</span>)<br>    self.Bi = np.random.random(<span class="hljs-number">1</span>)<br>    self.Users = []<br>    self.Items = []<br>    self.userItemDic = &#123;&#125;<br>    self.sampleSet = np.array([])<br>    self.mu = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>å®šä¹‰æ·»åŠ æ•°æ®é›†çš„å‡½æ•°ï¼Œä¸ºäº†èƒ½å¤šæ¬¡æ·»åŠ æ•°æ®ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½ä¼šæ›´æ–°æ¨¡å‹å‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addUserItemDic</span>(<span class="hljs-params">self, UIDic: <span class="hljs-built_in">dict</span></span>):</span><br>    <span class="hljs-comment"># å…ˆå°†è®­ç»ƒé›†å˜å›listï¼Œæ–¹ä¾¿appendæ•°æ®</span><br>    self.sampleSet = <span class="hljs-built_in">list</span>(self.sampleSet)<br>    <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> UIDic.keys():<br>        <span class="hljs-keyword">if</span> user <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.userItemDic.keys():<br>            self.userItemDic[user] = &#123;&#125;<br>            self.Users.append(user)<br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> UIDic[user]:<br>            <span class="hljs-keyword">if</span> item <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.userItemDic[user].keys():<br>                self.userItemDic[user][item] = UIDic[user][item]<br>                self.Items.append(item)<br>            self.sampleSet.append((user, item, UIDic[user][item]))<br>    <span class="hljs-comment"># å°†è®­ç»ƒé›†å˜å›npæ•°ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨fancy index</span><br>    self.sampleSet = np.array(self.sampleSet)<br>    <span class="hljs-comment"># æ›´æ–°æ€»ä½“å‡å€¼</span><br>    self.mu = <span class="hljs-number">0</span><br>    userMeanScore = []<br>    <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> self.userItemDic.keys():<br>        userMeanScore.append(np.mean(<span class="hljs-built_in">list</span>(self.userItemDic[user].values())))<br>    self.mu = np.mean(userMeanScore)<br>    <span class="hljs-comment"># ä½¿ç”¨setæ¥æ¸…é™¤é‡å¤é¡¹ï¼Œæ–¹ä¾¿åç»­åšç´¢å¼•</span><br>    self.Users = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(self.Users))<br>    self.Items = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(self.Items))<br>    <span class="hljs-comment"># æ›´æ–°å…¶å®ƒåŸºæœ¬å‚æ•°</span><br>    self.Pu = np.random.random(size=(<span class="hljs-built_in">len</span>(self.Users), self.k))<br>    self.Qi = np.random.random(size=(<span class="hljs-built_in">len</span>(self.Items), self.k))<br>    self.Bu = np.random.random(<span class="hljs-built_in">len</span>(self.Users))<br>    self.Bi = np.random.random(<span class="hljs-built_in">len</span>(self.Items))<br></code></pre></td></tr></table></figure><p>å®šä¹‰é¢„æµ‹å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pred</span>(<span class="hljs-params">self, user, item</span>):</span><br>    iUser, iItem = self.Users.index(user), self.Items.index(item)<br>    <span class="hljs-keyword">return</span> np.<span class="hljs-built_in">float</span>(self.mu + self.Bu[iUser] + self.Bi[iItem] + self.Pu[iUser].dot(self.Qi[iItem].T))<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨SGDçš„è®­ç»ƒå‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">train</span>(<span class="hljs-params">self, epoch=<span class="hljs-number">5</span>, n=<span class="hljs-number">100</span>, trainTestRate=<span class="hljs-number">0.8</span>, lr=<span class="hljs-number">0.1</span>, alpha=<span class="hljs-number">0.1</span></span>):</span><br>    trainMSEs = []<br>    testMSEs = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epoch):<br>        <span class="hljs-comment"># æŒ‰æ¯”ä¾‹éšæœºæŠ½å–æ ·æœ¬é›†ä¸æ•°æ®é›†</span><br>        numOfTrain = <span class="hljs-built_in">int</span>(trainTestRate * self.sampleSet.shape[<span class="hljs-number">0</span>])<br>        randomIndexSampleSet = np.random.choice(self.sampleSet.shape[<span class="hljs-number">0</span>], self.sampleSet.shape[<span class="hljs-number">0</span>], replace=<span class="hljs-literal">False</span>)<br>        trainSet = self.sampleSet[randomIndexSampleSet[:numOfTrain]]<br>        testSet = self.sampleSet[randomIndexSampleSet[numOfTrain:]]<br>        MSE = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> user, item, score <span class="hljs-keyword">in</span> trainSet:<br>            err = <span class="hljs-built_in">float</span>(score) - self.pred(user, item)<br>            MSE += err ** <span class="hljs-number">2</span><br>            iUser, iItem = self.Users.index(user), self.Items.index(item)<br>            self.Bu[iUser] += lr * (err - alpha * self.Bu[iUser])<br>            self.Bi[iItem] += lr * (err - alpha * self.Bi[iItem])<br>            self.Pu[iUser] += lr * (err * self.Qi[iItem] - alpha * self.Pu[iUser])<br>            self.Qi[iItem] += lr * (err * self.Pu[iUser] - alpha * self.Qi[iItem])<br>        testMSE = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> user, item, score <span class="hljs-keyword">in</span> testSet:<br>            err = <span class="hljs-built_in">float</span>(score) - self.pred(user, item)<br>            testMSE += err ** <span class="hljs-number">2</span><br>        MSE /= numOfTrain<br>        testMSE /= (self.sampleSet.shape[<span class="hljs-number">0</span>] - numOfTrain)<br>        trainMSEs.append(MSE)<br>        testMSEs.append(testMSE)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;epoch:%d\tMSE:%f\t testMSE:%f&#x27;</span> % (i, MSE, testMSE))<br>    <span class="hljs-keyword">return</span> trainMSEs, testMSEs<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œå®šä¹‰æ¨èå‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">recommend</span>(<span class="hljs-params">self, user</span>):</span><br>    items = []<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> self.Items:<br>        items.append((item, self.pred(user, item)))<br>    items = <span class="hljs-built_in">sorted</span>(items, key=<span class="hljs-keyword">lambda</span> d: d[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> items<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯æ¨èç³»ç»Ÿçš„å…¨éƒ¨å®šä¹‰ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•æ¨èç³»ç»Ÿæ€§èƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">movieRecommend = RecommendSys(k=<span class="hljs-number">3</span>)<br>movieRecommend.addUserItemDic(critics)<br>trainMse, testMse = movieRecommend.train(epoch=<span class="hljs-number">100</span>, n=<span class="hljs-number">20</span>, trainTestRate=<span class="hljs-number">0.7</span>)<br><span class="hljs-built_in">print</span>(movieRecommend.recommend(<span class="hljs-string">&#x27;Toby&#x27;</span>))<br>plt.plot(trainMse, c=<span class="hljs-string">&#x27;r&#x27;</span>, label=<span class="hljs-string">&#x27;TrainMse&#x27;</span>)<br>plt.plot(testMse, c=<span class="hljs-string">&#x27;b&#x27;</span>, label=<span class="hljs-string">&#x27;TestMse&#x27;</span>)<br>plt.legend()<br>plt.show()<br></code></pre></td></tr></table></figure><p>åœ¨<code>k=3ã€epoch=100ã€n=20ã€trainTestRate=0.7</code>çš„æ¡ä»¶ä¸‹æˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹ç»“æœï¼š</p><p><img src="MSE.svg"></p><p>å¾—åˆ°çš„Tobyæ¨èè¯„åˆ†çŸ©é˜µä¸ºï¼š</p><table><thead><tr><th>Snakes on a Plane</th><th>4.369445</th></tr></thead><tbody><tr><td>Superman Returns</td><td>3.865079</td></tr><tr><td>The Night Listener</td><td>3.511469</td></tr><tr><td>Lady in the Water</td><td>3.047306</td></tr><tr><td>Just My Luck</td><td>2.428205</td></tr><tr><td>You, Me and Dupree</td><td>1.211615</td></tr></tbody></table><p>æˆ‘ä»¬ç»§ç»­åœ¨ä¸åŒkçš„æƒ…å†µä¸‹ç»§ç»­å®éªŒï¼š</p><table><thead><tr><th align="center">k = 5</th><th align="center"><img src="MSE5.svg" style="zoom:50%;" /></th></tr></thead><tbody><tr><td align="center">k = 10</td><td align="center"><img src="MSE10.svg" style="zoom:50%;" /></td></tr><tr><td align="center">k = 1</td><td align="center"><img src="MSE1.svg" style="zoom:50%;" /></td></tr></tbody></table><p>æ˜¾ç„¶kè¶Šå¤§æ•°æ®å˜åŒ–è¶Šç¨³å®šï¼Œä½†æ˜¯æ¨¡å‹å æ®çš„ç©ºé—´å°±æ›´å¤§äº†ï¼Œä¸”æ¨¡å‹æ›´å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>æœºå™¨å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå­¦ä¹ ç¬”è®°</title>
    <link href="/2021/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8FLinux/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8FLinux/Linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Linuxå­¦ä¹ ç¬”è®°"><a href="#Linuxå­¦ä¹ ç¬”è®°" class="headerlink" title="Linuxå­¦ä¹ ç¬”è®°"></a>Linuxå­¦ä¹ ç¬”è®°</h1><p>[TOC]</p><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><h3 id="æƒé™ç›¸å…³"><a href="#æƒé™ç›¸å…³" class="headerlink" title="æƒé™ç›¸å…³"></a>æƒé™ç›¸å…³</h3><p><strong>Linuxçš„rwxæƒé™ï¼š</strong></p><table><thead><tr><th align="center">d</th><th align="center">r w x</th><th align="center">r w x</th><th align="center">r - -</th></tr></thead><tbody><tr><td align="center">æ–‡ä»¶ç±»å‹</td><td align="center">useræƒé™</td><td align="center">groupæƒé™</td><td align="center">otheræƒé™</td></tr></tbody></table><blockquote><ol><li>æ–‡ä»¶å¤¹(d)ã€æ™®é€šæ–‡ä»¶(-)ã€é“¾æ¥(l)ã€å—è®¾å¤‡æ–‡ä»¶(b)ã€ç®¡é“æ–‡ä»¶(p)ã€å­—ç¬¦è®¾å¤‡æ–‡ä»¶(c)ã€å¥—æ¥å£æ–‡ä»¶(s)</li><li>rï¼šreadã€wï¼šwriteã€xï¼šexcute</li></ol></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ls -l   <span class="hljs-comment">#åˆ—å‡ºå½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ç­‰çš„æƒé™</span><br><span class="hljs-comment">#out -&gt; drwxrwxr-x 2 mcfly mcfly 4096 10æœˆ 22 21:37 new</span><br>sudo chmod 271 xxx   <span class="hljs-comment">#ä»¥å…«è¿›åˆ¶è®¾ç½®xxxçš„ä¸‰ç»„æƒé™</span><br></code></pre></td></tr></table></figure><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">pwd</span><span class="hljs-comment">#æ‰“å°å½“å‰å·¥ä½œç›®å½•</span><br>mkdir<span class="hljs-comment">#å»ºç«‹æ–‡ä»¶å¤¹</span><br>touch<span class="hljs-comment">#å»ºç«‹ç©ºç™½æ–‡ä»¶</span><br>rm<span class="hljs-comment">#åˆ é™¤æ–‡ä»¶ï¼Œ-rå‚æ•°åˆ é™¤æ–‡ä»¶å¤¹ï¼Œ-rfä»¥é€’å½’çš„æ–¹å¼åˆ é™¤æ–‡ä»¶å¤¹åŠå…¶æ–‡ä»¶</span><br>chmod<span class="hljs-comment">#æ–‡ä»¶æƒé™ä¿®æ”¹å‘½ä»¤</span><br>find -name xxx<span class="hljs-comment">#æŸ¥æ‰¾æ–‡ä»¶</span><br>mv<span class="hljs-comment">#ç§»åŠ¨æ–‡ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶å</span><br>ctrl c          <span class="hljs-comment">#ç»“æŸå½“å‰è¿›ç¨‹</span><br></code></pre></td></tr></table></figure><hr><h2 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h2><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><p>åŸºäºTCP/IPï¼Œå¯é ã€‚</p><p>FTPä½¿ç”¨ä¸¤ä¸ªç«¯å£å·ï¼Œ21å£ä¸ºå‘½ä»¤ç«¯å£ï¼Œ20ç«¯å£ä¸ºæ•°æ®ä¼ è¾“ç«¯å£ã€‚</p><h3 id="Linuxä¸‹æ¶è®¾"><a href="#Linuxä¸‹æ¶è®¾" class="headerlink" title="Linuxä¸‹æ¶è®¾"></a>Linuxä¸‹æ¶è®¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt install vsftpd<br>sudo vim /etc/vsftpd.conf<span class="hljs-comment">#ä¿®æ”¹é…ç½®</span><br>sudo /etc/init.d/vsftpd restart<span class="hljs-comment">#å¯åŠ¨</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>åµŒå…¥å¼Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoæ¡†æ¶åŸºæœ¬æ“ä½œ</title>
    <link href="/2021/10/27/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <url>/2021/10/27/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="HexoåŸºæœ¬æŒ‡ä»¤"><a href="#HexoåŸºæœ¬æŒ‡ä»¤" class="headerlink" title="HexoåŸºæœ¬æŒ‡ä»¤"></a>HexoåŸºæœ¬æŒ‡ä»¤</h1><h2 id="å‚è€ƒè‡ªï¼šä»0å¼€å§‹ç”¨Hexoæ¡†æ¶æ­å»ºä¸ªäººåšå®¢ï¼ˆæ— å‘ç‰ˆï¼‰"><a href="#å‚è€ƒè‡ªï¼šä»0å¼€å§‹ç”¨Hexoæ¡†æ¶æ­å»ºä¸ªäººåšå®¢ï¼ˆæ— å‘ç‰ˆï¼‰" class="headerlink" title="å‚è€ƒè‡ªï¼šä»0å¼€å§‹ç”¨Hexoæ¡†æ¶æ­å»ºä¸ªäººåšå®¢ï¼ˆæ— å‘ç‰ˆï¼‰"></a>å‚è€ƒè‡ªï¼š<a href="https://zhuanlan.zhihu.com/p/305812430">ä»0å¼€å§‹ç”¨Hexoæ¡†æ¶æ­å»ºä¸ªäººåšå®¢ï¼ˆæ— å‘ç‰ˆï¼‰</a></h2><p><code>hexo init</code>ï¼šåˆå§‹åŒ–ä¸€ä¸ªåšå®¢</p><p><code>hexo s</code>ï¼šåœ¨æœ¬åœ°å¯åŠ¨åšå®¢</p><p><code>hexo n &quot;æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢æ–‡ç« &quot;</code></p><blockquote><p>å‘å¸ƒåšå®¢3æ­¥èµ°</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo clean<br>hexo g<br>hexo d<br></code></pre></td></tr></table></figure></blockquote><hr><h1 id="å¼€å§‹æ­å»º"><a href="#å¼€å§‹æ­å»º" class="headerlink" title="å¼€å§‹æ­å»º"></a>å¼€å§‹æ­å»º</h1><ol><li><p>å®‰è£…node <a href="https://nodejs.org/en/">Node.js (nodejs.org)</a></p></li><li><p>æµ‹è¯•ï¼š<code>node -v</code>ã€<code>npm -v</code></p></li><li><p>å®‰è£…ä¸­å›½æºï¼š<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p></li><li><p>æµ‹è¯•ï¼š<code>cnpm -v</code></p></li><li><p>å®‰è£…<strong>Hexo</strong>æ¡†æ¶ï¼š<code>cnpm install -g hexo-cli</code></p></li><li><p>æµ‹è¯•ï¼š<code>hexo -v</code></p></li><li><p>åˆ›å»ºä½ å­˜æ”¾åšå®¢çš„ç›®å½•ï¼Œæ¯”å¦‚ï¼š<code>G:\MyBlog</code></p></li><li><p>cdè¿›å…¥ä½ åšå®¢çš„ç›®å½•ï¼Œåˆå§‹åŒ–åšå®¢ï¼š<code>hexo init</code></p></li><li><p>ä¸­é—´æ“ä½œå‚è€ƒç¬¬ä¸€ç« </p></li><li><p>å®‰è£… Git éƒ¨ç½²çš„æ’ä»¶ï¼š<code>cnpm install --save hexo-deployer-git</code></p></li><li><p>åœ¨MyBlogç›®å½•ä¸‹ï¼Œæœ‰ä¸€ä¸ª<code>_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹æœ€åä¸€è¡Œå¦‚ä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¿˜æœ‰å¾ˆå¤šå…¶å®ƒé…ç½®ï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>    <span class="hljs-attr">repository:</span> <span class="hljs-string">https://github.com/McflyWZX/mcflywzx.github.io.git</span><br>    <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²åˆ°github.ioï¼š<code>hexo d</code></p></li><li><p>å¥½çœ‹çš„ Hexo ä¸»é¢˜åœ°å€ï¼š<code>https://hexo.io/themes/</code></p></li><li><p>ä¸‹è½½ä¸»é¢˜ï¼š<code>git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></p></li><li><p>ä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶ä¸­<code>theme</code>é€‰é¡¹</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>åšå®¢æ­å»º</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LicheePi nano å­¦ä¹ ç¬”è®°</title>
    <link href="/2021/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8FLinux/%E8%8D%94%E6%9E%9Dpi%20Nano%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/10/27/%E5%B5%8C%E5%85%A5%E5%BC%8FLinux/%E8%8D%94%E6%9E%9Dpi%20Nano%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="LicheePi-Nano"><a href="#LicheePi-Nano" class="headerlink" title="LicheePi Nano"></a>LicheePi Nano</h1><hr><h2 id="2021-9-5-U-BOOTè°ƒè¯•æˆåŠŸ"><a href="#2021-9-5-U-BOOTè°ƒè¯•æˆåŠŸ" class="headerlink" title="2021/9/5 U-BOOTè°ƒè¯•æˆåŠŸ"></a>2021/9/5 U-BOOTè°ƒè¯•æˆåŠŸ</h2><h3 id="è¸©å‘å†ç¨‹"><a href="#è¸©å‘å†ç¨‹" class="headerlink" title="è¸©å‘å†ç¨‹"></a>è¸©å‘å†ç¨‹</h3><p>é¦–å…ˆæ—¶å®ƒçš„å®˜æ–¹æ•™ç¨‹ï¼Œæœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªç•Œé¢æ›´æ–°ï¼Œä½†æ˜¯bugç›¸å…³çš„æç¤ºæ›´å°‘ï¼Œç¬¬äºŒä¸ªåä¹‹ã€‚å®˜æ–¹æ•™ç¨‹æ˜¯å­¦ä¹ çš„ä¸»çº¿ï¼Œä½†æ˜¯æœ‰äº›åœ°æ–¹æœ‰é—®é¢˜ï¼Œæ¯”å¦‚u-bootåˆ†æ”¯çš„é€‰æ‹©ã€‚</p><ul><li>[è”ææ´¾å®˜æ–¹æ•™ç¨‹1]: <a href="https://wiki.sipeed.com/soft/Lichee/zh/Nano-Doc-Backup/get_started/first_eat.html">https://wiki.sipeed.com/soft/Lichee/zh/Nano-Doc-Backup/get_started/first_eat.html</a></li><li>[è”ææ´¾å®˜æ–¹æ•™ç¨‹2]: <a href="http://nano.lichee.pro/get_started/first_eye.html">http://nano.lichee.pro/get_started/first_eye.html</a></li></ul><p>å…³äºu-bootåˆ†æ”¯çš„é€‰æ‹©ï¼Œå®˜æ–¹ç»™å‡ºçš„æ˜¯<code>git checkout nano-lcd800480</code>ï¼ŒæŒ‰ç…§æ•™ç¨‹é…ç½®çš„å±å¹•ç»†èŠ‚ï¼Œä½†æˆ‘å®é™…ç”¨480-272çš„å±å¹•æµ‹è¯•æ—¶å‘ç°å…ˆæ˜¯ä¸€ä¸ªè”æçš„å›¾æ ‡çš„ä¸€éƒ¨åˆ†ï¼Œç„¶åå„ç§èŠ±å±ï¼Œæœ€åä¹Ÿæ²¡æœ‰ä¼é¹…å›¾æ ‡å’ŒåŸºæœ¬ä¿¡æ¯ã€‚æœ€è‡´å‘½çš„æ˜¯è¾“å…¥<code>bdinfo</code>å’Œ<code>printenv</code>æŒ‡ä»¤æç¤ºä¸è¯†åˆ«ã€‚åæ¥å‚è€ƒ:</p><p>å‘ç°ä»–ç”¨çš„åˆ†æ”¯æ˜¯<code>nano-v2018.01</code>ï¼Œæˆ‘æŒ‰ç…§å¦ä¸€ä¸ªæ•™ç¨‹åœ¨u-bootæ§åˆ¶å°è¾“å…¥:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">sf probe 0<br>sf erase 0 0x100000<br>reset<br></code></pre></td></tr></table></figure><p>æ“¦é™¤äº†spi flashï¼Œé‡æ–°çƒ§å½•äº†åˆ†æ”¯<code>nano-v2018.01</code>å‡ºç°äº†å’Œå‚»ç“œåŒ…ä¸€æ ·çš„ç•Œé¢ï¼Œè¯´æ˜åº”è¯¥æ˜¯æˆåŠŸäº†ï¼Œæ­¤æ—¶æˆ‘çš„TFå¡å·²ç»çƒ§å½•äº†linuxç³»ç»Ÿï¼Œæ’ä¸Šå»è¯•äº†è¯•ï¼Œå¯ä»¥è¿›ç³»ç»Ÿï¼ŒæˆåŠŸäº†ã€‚å› ä¸ºåæœŸæˆ‘ä»¬è¿˜è¦å€’è…¾ï¼Œæ‰€ä»¥u-bootå’Œlinuxæˆ‘ä»¬éƒ½è¦ä»å‚»ç“œåŒ…è¿‡æ¸¡åˆ°è‡ªå·±ç¼–è¯‘çƒ§å½•çš„ç¨‹åºã€‚</p><blockquote><p>æœŸé—´æœ‰ä¸ªæœ‰æ„æ€çš„ç°è±¡ï¼Œå®˜æ–¹æ•™ç¨‹é€‰æ‹©çš„åˆ†æ”¯<code>nano-lcd800480</code>é‡Œé¢å…³äºLCDçš„å¾ˆå¤šé…ç½®å·²ç»å†™å¥½äº†ï¼Œä½†æ˜¯å®˜æ–¹æ•™ç¨‹æœ‰å¾ˆå¤šå…³äºé…ç½®LCDçš„ç»†èŠ‚ã€‚ç½‘å‹é€‰æ‹©çš„<code>nano-v2018.01</code>åˆ†æ”¯åˆ™éœ€è¦æŒ‰ç…§æ•™ç¨‹æ‰‹åŠ¨é…ç½®ï¼Œæ‰€ä»¥ä¼°è®¡åŸæ¥å®˜æ–¹ç”¨çš„å°±æ˜¯<code>nano-v2018.01</code>ï¼Œåªæ˜¯åæ¥ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ”¹æˆäº†<code>nano-lcd800480</code>è€Œä¸”æ²¡æœ‰ä»”ç»†æµ‹è¯•ã€‚</p></blockquote><p>è™½ç„¶ä½†æ˜¯ï¼Œæˆ‘å¹¶æ²¡æœ‰æµ‹è¯•<code>nano-lcd800480</code>èƒ½ä¸èƒ½æ­£å¸¸bootï¼Œæ²¡å‡†äººå®¶åªæ˜¯bootç•Œé¢æ²¡äº†è€Œå·²å‘¢</p><h3 id="å„ç§å€¼å¾—æ³¨æ„çš„é—®é¢˜"><a href="#å„ç§å€¼å¾—æ³¨æ„çš„é—®é¢˜" class="headerlink" title="å„ç§å€¼å¾—æ³¨æ„çš„é—®é¢˜"></a>å„ç§å€¼å¾—æ³¨æ„çš„é—®é¢˜</h3><ol><li><p>åˆ‡æ¢<code>nano-v2018.01</code>åï¼Œ<code>make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- f1c100s_nano_uboot_defconfig</code>æŒ‡ä»¤ä¼šæŠ¥é”™ï¼Œä½ éœ€è¦æ›´æ¢configæ–‡ä»¶ï¼Œæ”¹æˆ<code>arm-linux-gnueabi- licheepi_nano_spiflash_defconfig</code></p></li><li><p><code>nano-lcd800480</code>ç‰ˆæœ¬çš„u-bootå¯ä»¥é€šè¿‡æ“¦é™¤spi-flashçš„å‘½ä»¤æ¥é‡æ–°è¿›å…¥felæ¨¡å¼ï¼Œä½†<code>nano-v2018.01</code>ç‰ˆæœ¬ä¸è¡Œï¼Œå¿…é¡»çŸ­æ¥flashèŠ¯ç‰‡çš„CSä¸GNDã€‚å…¶å®å¾ˆå¥½æ“ä½œï¼Œ<em>åœ†ç‚¹çš„é‚£ä¸ªè„š(1è„š)å°±æ˜¯CSï¼ŒåŒä¸€æ’å¼•è„šçš„å¦ä¸€ç«¯å°±æ˜¯GND</em>ï¼Œæ•™ç¨‹è¯´è¦ä¸€è¾¹ä¸Šç”µä¸€è¾¹çŸ­æ¥ï¼Œä½†æˆ‘ç¢°ç€ç¢°æ’å®ƒå°±ç›´æ¥é‡å¯ç„¶åå°±è¿›feläº†ï¼Œhhh</p></li><li><p>è¿è¡Œæ§åˆ¶å°ï¼Œçœ‹è§æœ‰è¾“å‡ºæ˜¯ä¸æ˜¯ç‰¹åˆ«å…´å¥‹ï¼Ÿçœ‹åˆ°ç™»å½•ä¿¡æ¯æ˜¯ä¸æ˜¯åˆä¸€è„¸æ‡µé€¼ï¼Ÿåˆ«æ…Œï¼Œè¯•è¯•<code>è´¦å·:rootå¯†ç :licheepi</code></p></li><li><p><code>è”ææ´¾é€šè¿‡usbçƒ§å½•æ—¶å‡ºç°ERROR: Allwinner USB FEL device not found!</code>ï¼Œè¿™ä¸ªçƒ§å½•å’Œæµ‹è¯•felæ¨¡å¼åŠŸèƒ½éƒ½è¦å…ˆè¿›felæ¨¡å¼ï¼Œ<strong>ä¸æ˜¯u-boot</strong></p></li><li><p><code>è§£å†³Ubuntuä¸‹make errorï¼šfatal error: zlib.h: No such file or directory</code></p><p> è¿è¡Œ<code>sudo apt-get install zlib1g-dev</code></p></li><li><p><code>æŠ¥é”™ï¼šunable to execute â€˜swigâ€˜: No such file or directory</code></p><p> è¿™ä¸ªä¹Ÿæ˜¯å¾ˆç®€å•ï¼Œè¿è¡Œ<code>sudo apt install swig</code></p></li><li><p><code>linuxå†…æ ¸ç¼–è¯‘ fatal error: curses.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•è§£å†³åŠæ³•</code></p><p> è¿è¡Œ<code>apt-get install libncurses5-dev</code></p></li><li><p>åµŒå…¥å¼ç³»ç»Ÿu-bootç¼–è¯‘å‡ºç°é—®é¢˜</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">HOSTCC scripts/basic/fixdep<br>/bin/sh: 1: cc: not found<br>scripts/Makefile.host:94: recipe <span class="hljs-keyword">for</span> target â€˜scripts/basic/fixdepâ€™ failed<br>make[1]: *** [scripts/basic/fixdep] Error 127<br>Makefile:397: recipe <span class="hljs-keyword">for</span> target â€˜scripts_basicâ€™ failed<br>make: *** [scripts_basic] Error 2<br></code></pre></td></tr></table></figure><p> è§£å†³æ–¹æ³•è¿˜æ˜¯è£…åº“ï¼š<code>sudo apt-get install bison</code>å’Œ<code>sudo apt-get install flex</code></p></li></ol><hr><h2 id="2021-9-27-21-44-Linuxç³»ç»Ÿç¼–è¯‘ã€è¿è¡ŒæˆåŠŸ"><a href="#2021-9-27-21-44-Linuxç³»ç»Ÿç¼–è¯‘ã€è¿è¡ŒæˆåŠŸ" class="headerlink" title="2021/9/27    21:44 Linuxç³»ç»Ÿç¼–è¯‘ã€è¿è¡ŒæˆåŠŸ"></a>2021/9/27    21:44 Linuxç³»ç»Ÿç¼–è¯‘ã€è¿è¡ŒæˆåŠŸ</h2><h3 id="SDå¡æ“ä½œ"><a href="#SDå¡æ“ä½œ" class="headerlink" title="SDå¡æ“ä½œ"></a>SDå¡æ“ä½œ</h3><blockquote><p>å®˜æ–¹å¼•å¯¼:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">udo fdisk -l     <span class="hljs-comment"># é¦–å…ˆæŸ¥çœ‹ç”µè„‘ä¸Šå·²æ’å…¥çš„TFå¡çš„è®¾å¤‡å·</span><br>sudo umount /dev/sdXx <span class="hljs-comment"># è‹¥è‡ªåŠ¨æŒ‚è½½äº†TFè®¾å¤‡ï¼Œè¯·å…ˆå¸è½½</span><br>sudo fdisk /dev/sdX   <span class="hljs-comment"># è¿›è¡Œåˆ†åŒºæ“ä½œ </span><br><span class="hljs-comment"># è‹¥å·²å­˜åˆ†åŒºå³æŒ‰ d åˆ é™¤å„ä¸ªåˆ†åŒº</span><br><span class="hljs-comment"># é€šè¿‡ n æ–°å»ºåˆ†åŒºï¼Œç¬¬ä¸€åˆ†åŒºæš‚ä¸”ç”³è¯·ä¸º32M(è¶³å¤Ÿå¤§äº†...)ï¼Œå‰©ä¸‹çš„ç©ºé—´éƒ½ç»™ç¬¬äºŒåˆ†åŒº</span><br><span class="hljs-comment"># w ä¿å­˜å†™å…¥å¹¶é€€å‡º</span><br>sudo mkfs.vfat /dev/sdX1 <span class="hljs-comment"># å°†ç¬¬ä¸€åˆ†åŒºæ ¼å¼åŒ–æˆFAT</span><br>sudo mkfs.ext4 /dev/sdX2 <span class="hljs-comment"># å°†ç¬¬ä¸€åˆ†åŒºæ ¼å¼åŒ–æˆEXT4</span><br></code></pre></td></tr></table></figure></blockquote><p>ç”±äºæˆ‘çš„å¡ä¹‹å‰åˆ·äº†å‚»ç“œåŒ…ï¼Œçœ‹æ ·å­æ˜¯è¦è¿›è¡Œä¸€å®šæ“ä½œäº†</p><p>é™„æˆ‘çš„å¡çš„ä¿¡æ¯:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">Disk /dev/sdbï¼š14.86 GiBï¼Œ15931539456 å­—èŠ‚ï¼Œ31116288 ä¸ªæ‰‡åŒº<br>Disk model: SD/MMC/MS PRO   <br>å•å…ƒï¼šæ‰‡åŒº / 1 * 512 = 512 å­—èŠ‚<br>æ‰‡åŒºå¤§å°(é€»è¾‘/ç‰©ç†)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚<br>I/O å¤§å°(æœ€å°/æœ€ä½³)ï¼š512 å­—èŠ‚ / 512 å­—èŠ‚<br>ç£ç›˜æ ‡ç­¾ç±»å‹ï¼šdos<br>ç£ç›˜æ ‡è¯†ç¬¦ï¼š0x5f57945f<br><br>è®¾å¤‡       å¯åŠ¨  èµ·ç‚¹   æœ«å°¾   æ‰‡åŒº  å¤§å° Id ç±»å‹<br>/dev/sdb1        2048  34815  32768   16M  c W95 FAT32 (LBA)<br>/dev/sdb2       34816 409599 374784  183M 83 Linux<br></code></pre></td></tr></table></figure><p>å®˜æ–¹æ¨èå‚è€ƒ <a href="https://github.com/Zepan/ilichee/tree/master/%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/%E9%95%9C%E5%83%8F%E7%83%A7%E5%86%99">https://github.com/Zepan/ilichee/tree/master/èµ„æºæ–‡ä»¶/é•œåƒçƒ§å†™</a> çš„å†…å®¹ï¼Œé‡Œé¢æœ‰å…·ä½“æ“ä½œ</p><p><em>æˆ‘ä½¿ç”¨åå‘ç°ï¼Œè¿™ä¸ª<code>fdisk</code>æ˜ä»¤æœ‰è¾ƒå¤šæç¤ºï¼Œå¤§å®¶å¯ä»¥æ”¾å¿ƒé£Ÿç”¨</em></p><blockquote><p>ä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œè´´ä¸Šåˆ é™¤åˆ†åŒºå’Œåˆ›å»ºåˆ†åŒºçš„ç¤ºä¾‹æ“ä½œ(æ¥è‡ªå®˜æ–¹github)</p><p>åˆ é™¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/sh</span><br>sudo fdisk /dev/sdb&lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">d</span><br><span class="hljs-string">1</span><br><span class="hljs-string">d</span><br><span class="hljs-string">2</span><br><span class="hljs-string">d</span><br><span class="hljs-string">3</span><br><span class="hljs-string">d</span><br><span class="hljs-string">4</span><br><span class="hljs-string">w</span><br><span class="hljs-string">p</span><br><span class="hljs-string">q</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure><p>åˆ›å»º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sh">sudo fdisk /dev/sdb &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">n</span><br><span class="hljs-string">p</span><br><span class="hljs-string">1</span><br><span class="hljs-string">+16M</span><br><span class="hljs-string">n</span><br><span class="hljs-string">p</span><br><span class="hljs-string">2</span><br><span class="hljs-string">p</span><br><span class="hljs-string">w</span><br><span class="hljs-string">q</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure></blockquote><p>å…³äºæ–‡ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨<code>df -T /dev/sdbx</code>æ¥çœ‹è‡ªå·±åˆ°åº•æœ‰æ²¡æœ‰æ ¼å¼åŒ–æˆåŠŸã€‚æœ‰æ—¶å€™<code>fdisk</code>æç¤ºè®¾å¤‡å¿™ï¼Œå¯ä»¥è¯•ç€é‡æ–°æ’å¡çœ‹çœ‹ã€‚</p><h2 id="ä¸»çº¿Linuxç¼–è¯‘"><a href="#ä¸»çº¿Linuxç¼–è¯‘" class="headerlink" title="ä¸»çº¿Linuxç¼–è¯‘"></a>ä¸»çº¿Linuxç¼–è¯‘</h2><p>å°è´´å£«:</p><ol><li>è®¾å¤‡æ ‘é‡Œå¥½åƒå°±æ˜¯æè¿°å„ç§é©±åŠ¨çš„ï¼Œä¾‹å¦‚lcdå’Œflashï¼Œä½†åªæ˜¯åå­—ã€GPIOç›¸å…³çš„æè¿°ï¼Œä¸è¿‡å…¶æä¾›äº†å¾ˆå¤šé€šç”¨è®¾å¤‡çš„é©±åŠ¨ä¾‹å¦‚lcdçš„<code>linux -&gt; drivers -&gt; gpu -&gt; drm -&gt; panelä¸‹æœ‰è®¸å¤šå±å¹•çš„é…ç½®ï¼Œå¯æŒ‘é€‰åˆé€‚çš„è¿›è¡Œé…ç½®</code>ã€‚è¿™åº”è¯¥æ˜¯ç”¨<em>Linuxçš„å¥½å¤„</em>ä¹‹ä¸€</li></ol><p>é‡åˆ°çš„å°é—®é¢˜:</p><ol><li><p><code>fatal error: openssl/bio.h: No such file or directory</code></p><p> è§£å†³:<code>sudo apt-get install libssl-dev</code></p></li><li><p><code>makeï¼šarm-linux-gnueabihf-gccï¼šå‘½ä»¤æœªæ‰¾åˆ°</code></p><p> è¿™ä¸ªå’Œä¹‹å‰å®‰è£…çš„äº¤å‰ç¼–è¯‘å™¨ä¸ä¸€æ ·ï¼Œè¿è¡Œ<code>apt install gcc-arm-linux-gnueabihf</code>æ¥å®‰è£…ã€‚ä¸è¿‡è¿™æ ·è¯è¯´æ˜¯ä¸æ˜¯ä¹‹å‰çš„é‚£ä¸ªäº¤å‰ç¼–è¯‘å™¨ä¹Ÿèƒ½è¿™ä¹ˆè£…ï¼Ÿ</p></li><li><p>åœ¨è®¾å¤‡æ ‘æ–‡ä»¶å‘ç°äº†æœ‰å…³spi flashå‹å·çš„å®šä¹‰ï¼Œä»¥åæ¢äº†å‹å·å¯ä»¥å»è¿™é‡Œé¢æ”¹å§ï¼Œçœ‹äº†ä¸€ä¸‹æ”¯æŒçš„å‹å·ï¼Œæœ‰:<code>w25q128</code>ã€<code>xt25f128b</code></p></li><li><p>ç¼–è¯‘è®¾å¤‡æ ‘æ—¶ï¼Œä¸€å®šè¦å›åˆ°Linuxæ ¹ç›®å½•ä¸‹ç¼–è¯‘ï¼Œä¸ç„¶ä¼šæç¤º<code>make: *** æ²¡æœ‰è§„åˆ™å¯åˆ¶ä½œç›®æ ‡â€œdtbsâ€ã€‚ åœæ­¢ã€‚</code></p></li><li><p>ç¼–è¯‘<code>buildroots</code>æ—¶ï¼ŒGameåº•ä¸‹çš„appä¸è¦é€‰å¤ªå¤šäº†ï¼Œæœ‰äº›å®¹æ˜“ç¼–è¯‘ä¸è¿‡</p></li><li><p>å¤åˆ¶ã€è§£å‹å®Œ<code>rootfs.tar</code>åï¼Œæ£€æŸ¥<code>/etc</code>åº•ä¸‹çš„<code>inttab</code>æ–‡ä»¶ï¼š</p><p> æŠŠ:<code>console::respawn:/sbin/getty -L  console 0 vt100 # GENERIC_SERIAL</code></p><p> æ›¿æ¢æˆ<code>ttyS0::respawn:/sbin/getty -L ttyS0 115200 vt100 # GENERIC_SERIAL</code></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>åµŒå…¥å¼Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„æµ‹è¯•æ–‡ç« </title>
    <link href="/2021/10/27/%E6%88%91%E7%9A%84%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/"/>
    <url>/2021/10/27/%E6%88%91%E7%9A%84%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/10/27/hello-world/"/>
    <url>/2021/10/27/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
